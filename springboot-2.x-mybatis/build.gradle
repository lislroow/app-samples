/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
  id 'java-library'
  id 'maven-publish'
  id 'org.springframework.boot' version '2.7.18'
}

repositories {
  mavenLocal()
  maven {
    url = uri('https://repo.maven.apache.org/maven2/')
  }
  maven {
    url = uri('https://nexus.mgkim.net/repository/maven-public/')
  }
}

dependencies {
  api libs.org.slf4j.slf4j.api
  api libs.org.springframework.boot.spring.boot.configuration.processor
  api libs.com.github.ulisesbocchio.jasypt.spring.boot.starter
  api libs.org.springframework.boot.spring.boot.starter.web
  api libs.jakarta.servlet.jakarta.servlet.api
  api libs.com.fasterxml.jackson.core.jackson.databind
  api libs.com.h2database.h2
  api libs.com.microsoft.sqlserver.mssql.jdbc
  api libs.com.zaxxer.hikaricp
  api libs.org.springframework.spring.jdbc
  api libs.org.mybatis.mybatis
  api libs.org.mybatis.mybatis.spring
  api libs.org.bgee.log4jdbc.log4j2.log4jdbc.log4j2.jdbc4.v1
  testImplementation libs.org.springframework.boot.spring.boot.starter.test
  testImplementation libs.junit.junit
}

group = 'spring.application'
version = '0.1-SNAPSHOT'
//version = '0.1'
description = 'springboot-2.x-mybatis'
java.sourceCompatibility = JavaVersion.VERSION_1_8

task sourceJar(type: Jar) {
  from sourceSets.main.allJava
  archiveClassifier = "sources"
}

publishing {
  repositories {
    maven {
      url = "https://nexus.mgkim.net/repository/maven-${project.version.endsWith('-SNAPSHOT') ? 'snapshots' : 'releases'}/"
      credentials {
      username = 'admin'
      password = '1'
      }
    }
  }
  publications {
    maven(MavenPublication) {
      from(components.java)
      artifact bootJar
      artifact source: sourceJar, classifier: 'src', extension: 'zip'
      artifact sourceJar
    }
  }
}

tasks.withType(JavaCompile) {
  options.encoding = 'utf-8'
}

tasks.withType(Javadoc) {
  options.encoding = 'utf-8'
}

springBoot {
  mainClass = 'spring.sample.mybatis.MainApplication'
}
